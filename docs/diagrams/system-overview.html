<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Overview</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            padding: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .mermaid {
            max-width: 100%;
            background: transparent;
        }
    </style>
</head>
<body>
    <div class="mermaid">
flowchart TB
    Start([Document Upload]) --> Extract[Document Extraction]
    Extract --> Chunk[Semantic Chunking]
    Chunk --> Embed[Generate Embeddings]
    Embed --> Index[Vector Store Indexing]
    Index --> Queue[Queue Audit]
    Queue --> Runner[Compliance Runner]
    Runner --> ProcessChunk{For Each Chunk}
    ProcessChunk --> BuildContext[Build RAG Context]
    BuildContext --> Analyze[LLM Analysis]
    Analyze --> Refine{Needs More Context?}
    Refine -->|Yes| BuildContext
    Refine -->|No| Flag[Generate Flag]
    Flag --> Store[Store Result]
    Store --> MoreChunks{More Chunks?}
    MoreChunks -->|Yes| ProcessChunk
    MoreChunks -->|No| Aggregate[Aggregate Results]
    Aggregate --> Report[Generate Report]
    Report --> Export[Export Report]
    Export --> End([Complete])
    
    style Start fill:#f0f9ff,stroke:#0284c7,stroke-width:2px
    style End fill:#f0fdf4,stroke:#16a34a,stroke-width:2px
    style Runner fill:#fefce8,stroke:#ca8a04,stroke-width:2px
    style Analyze fill:#fef2f2,stroke:#dc2626,stroke-width:2px
    style Report fill:#f0f9ff,stroke:#0284c7,stroke-width:2px
    </div>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#ffffff',
                primaryTextColor: '#1f2937',
                primaryBorderColor: '#3b82f6',
                lineColor: '#6b7280',
                background: '#ffffff',
                mainBkg: '#ffffff',
                textColor: '#1f2937'
            },
            flowchart: {
                curve: 'basis',
                padding: 20,
                useMaxWidth: true
            }
        });
    </script>
</body>
</html>


